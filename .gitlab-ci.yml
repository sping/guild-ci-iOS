
before_script:
  - gem update --system
  - gem install bundler --force
  - bundle update --bundler
  - gem install cocoapods
  - brew install swiftlint
  - bundle install
  - pod install

variables:
  LC_ALL: "en_US.UTF-8"
  LANG: "en_US.UTF-8"
  GIT_STRATEGY: clone

stages:
    - lint
    - build
    - documentation
    - deploy

lint_project:
  stage: lint
  script:
    - swiftlint autocorrect
    - swiftlint lint

build_project:
  stage: build
  script: 
    - xcodebuild clean -project GitViewer.xcworkspace -scheme GitViewer | xcpretty

docGen:
  stage: documentation
  script:
    - jazzy

deployStaging:
  stage: deploy
  only:
     - /^Fabric/Staging/.*$/
  script:
   - fastlane deploy_staging

deployProduction:
  stage: deploy
  only: 
    - /^Fabric/Production/.*$/
  script:
    - fastlane deploy_production

deployRelease: 
  stage: deploy
  only:
    -  /^GooglePlayStore/.*$/
  script:
    fastlane deploy_app_store
